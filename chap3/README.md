# 3. 로컬 저장소

***

# 로컬 저장소 생성

새로운 저장소를 생성하거나 혹은 기존의 URL로부터 저장소를 획득할 수 있습니다. 프로젝트 개발 시 저장소 생성은 한번만 하면 됩니다.

### `$ git init`

새로운 로컬 저장소를 생성합니다. `.git` 이라는 이름의 폴더가 생성됩니다. git init 명령으로 새 로컬 저장소를 만들면 기본적으로 `master`라는 이름의 브랜치가 제공됩니다. 이 후 생기는 다른 브랜치들은 `master` 브랜치로부터 갈라지게 되어 같은 부모를 가지게 됩니다. 로컬 저장소를 새로 만든 상태에서는 아무런 커밋이 존재하지 않습니다.

### `$ git clone [url]`

프로젝트와 프로젝트의 히스토리(커밋 내역)를 다운로드 합니다. `git clone` 명령을 통해 원격파일을 복사해오면, `origin`이라는 이름으로 시작하는 클론해온 리모트 URL이 등록됩니다.

가장 먼저 알아차릴만한 변화는 우리의 로컬 저장소에 `origin/master`라고하는 새 브랜치가 생긴겁니다. `origin`는 원격저장소를 가리키는 별칭입니다. 이런 종류의 브랜치는 원격 브랜치라고 불립니다.

가장 최근 원격 원격저장소와 작업을 했을때를 기준으로 원격 브랜치는 원격 저장소의 상태를 반영합니다. `원격 브랜치는 로컬에서의 작업과 공개적으로 되고있는 작업의 차이를 이해하는데 도움을 줍니다.` 다른 사람들과 작업을 공유하기전에 반드시 해야 할 과정입니다.

원격 브랜치는 체크아웃을 하게 되면 `분리된 HEAD 모드`로 가게되는 특별한 행동방식이 있습니다. Git은 여러분이 이 브랜치들에서 직접 작업할 수 없기 때문에 일부로 이렇게 처리합니다. 여러분은 작업을 하고 원격 저장소와 여러분의 작업을 공유해야합니다. 공유 작업을 한 이후에 원격 브랜치가 갱신됩니다.

`git checkout origin/master; git commit -m "updated"`

`origin/master`를 체크아웃 하게되면 깃은 우리를 `분리된 HEAD 모드`로 만들고 `새로운 커밋을 추가해도 origin/master를 갱신하지 않습니다.` 이것은 `origin/master`가 원격 저장소가 갱신될 때만 갱신되어야 하기 때문입니다. 대부분의 경우 `origin/master`에서 직접 커밋을 수행해야 할 이유는 없습니다. 로컬 저장소에 존재하는 원격브랜치는 원격 저장소와의 상태 비교를 위한 용도이지 새로운 커밋을 추가하는 용도가 아님을 기억하세요.

***

# 깃 추적 대상에서 제외하기

특정 파일 및 경로 밑에 존재하는 자원들을 깃 관리대상에서 제외시킵니다. 백업이 필요없는 대상을 깃에게 미리 알려주어 깃이 관리하지 않도록 조치합니다.

### .gitignore

`.gitignore` 파일은 프로젝트에서 백업을 원하지 않는 파일들을 깃 관리에서 제외시킬수 있는 설정파일입니다. 이 파일도 커밋 대상에 포함시켜야 합니다. 특정 패턴으로 매칭되는 파일과 경로(폴더)를 관리대상에서 제외합니다.

```
# 이 기호 다음에 주석을 달 수 있습니다.

# 확장자가 .log로 끝나는 모든 파일들을 관리대상에서 제외합니다.
*.log

# 위 설정에도 불구하고 spring.log 파일은 관리대상에 포함합니다.
!spring.log

# 현재 디렉토리 바로 밑에 있는 schema.sql 파일을 관리대상에서 제외합니다.
# 서브 디렉토리 밑에 있는 schema.sql 파일은 관리대상에 포함합니다.
/schema.sql

# 파일명 temp-로 시작하는 모든 파일들을 관리대상에서 제외합니다.
temp-*

# build 폴더 밑에 존재하는 모든 파일들을 관리대상에서 제외합니다.
build/

# doc/note.txt 파일은 관리대상에서 제외되나 
# doc/server/note.txt 파일은 관리대상에 포함합니다.
doc/*.txt

# doc 폴더부터 시작해서 모든 하부 폴더에 존재하는 
# 확장자가 .pdf로 끝나는 모든 파일들을 관리대상에서 제외합니다.
doc/**/*.pdf
```

### .gitignore 내용작성 도움받기

다음 사이트는 `.gitignore` 파일의 등록 내용을 자동으로 만들어 주는 서비스를 제공합니다.

`https://www.gitignore.io/`

### 관리대상에서 제외된 파일정보를 확인

`$ git ls-files --others --ignored --exclude-standard`

***

# 빈 폴더를 커밋에 포함시키기

기본적으로 비어있는 폴더는 깃의 관리대상이 아닙니다. 빈 폴더를 깃의 관리대상에 포함시키는 방법은 간단합니다. `.gitkeep` 파일을 빈 폴더에 배치하여 깃의 관리대상이 되도록 조치할 수 있습니다. 이럴 때 사용하는 `.gitkeep` 파일은 아무런 내용이 없어도 됩니다. `.gitkeep` 파일명은 관습이기에 무엇때문에 이 파일이 존재하는지 설명해야 하는 수고가 없습니다.
